module comparator (
    input z,
    input n,
    input v,
    input alufn[2],
    output out
  ) {
  
  /*
     COMPARATOR TEST CASES
     
     A == B (alufn = 11x011)
     1) z = 1
     a = 1111 1111 0000 0000
     b = 1111 1111 0000 0000
     
     2) z = 0
     a = 1111 1111 0000 0000
     b = 0000 0000 0000 0000
     
     A < B (alufn = 11x101)
     1) n = 1
     a = 1111 1111 0000 0000
     b = 0000 0000 0000 0000
     
     2) v = 1
     a = 1000 0000 0000 0000
     b = 0111 1111 1111 1111
     
     3) n = 0, v = 0, z = 1
     a = 1111 1111 0000 0000
     b = 1111 1111 0000 0000
     
     A <= B (alufn = 11x111)
     1) z = 1
     a = 1111 1111 0000 0000
     b = 1111 1111 0000 0000
     
     2) n = 1
     a = 1111 1111 0000 0000
     b = 0000 0000 0000 0000
     
     3) v = 1
     a = 1000 0000 0000 0000
     b = 0111 1111 1111 1111
     
     4) n = 0, v = 0, z = 0
     a = 0111 1111 0000 0000
     b = 0111 0000 0000 0000
  
  */
  
  sig i, j;

  always {
    i = n ^ v;
    j = i | z;
    
    out = b0;
    case (alufn) {
      b10:
        out = i;
      b01: 
        out = z;
      b11:
        out = j;
      }
  }
}
